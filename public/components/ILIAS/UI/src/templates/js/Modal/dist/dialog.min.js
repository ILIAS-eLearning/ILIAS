/**
 * This file is part of ILIAS, a powerful learning management system
 * published by ILIAS open source e-Learning e.V.
 *
 * ILIAS is licensed with the GPL-3.0,
 * see https://www.gnu.org/licenses/gpl-3.0.en.html
 * You should have received a copy of said license along with the
 * source code, too.
 *
 * If this is not the case or you just want to try ILIAS, you'll find
 * us at:
 * https://www.ilias.de
 * https://github.com/ILIAS-eLearning
 */
!function(e,t){"use strict";class i{#e;#t;#i;constructor(e,t){if(this.#e=e,this.#t=document.getElementById(t),null===this.#t)throw new Error(`Could not find a Modal for id '${t}'.`);this.#i=this.#t.getElementsByTagName("dialog").item(0)}show(e){this.load(e),this.#i.showModal()}close(){this.#i.close()}async load(e,t={}){await fetch(e,t).then((e=>e.text())).then((e=>{const t=(new this.#e).parseFromString(e,"text/html"),i=t.querySelector('section[data-section="il-modal-response__title"]'),o=t.querySelector('section[data-section="il-modal-response__contents"]'),n=t.querySelector('section[data-section="il-modal-response__buttons"]'),s=t.querySelector('template[data-section="il-modal-response__command"]'),r=t.querySelector("script"),a=this.#i.querySelector("span.il-modal-dialog__title"),l=this.#i.querySelector("div.il-modal-dialog__contents"),c=this.#i.querySelector("div.il-modal-dialog__buttons");return a.innerHTML=i.innerHTML,l.innerHTML=o.innerHTML,c.innerHTML=n.innerHTML,this.#o(l),this.#n(l),r&&this.#s(r.text),s.innerHTML.trim()})).then((e=>{"close"===e&&this.close()}))}#s(e){const t=this.#t.querySelector("section.il-modal-dialog__scripts"),i=document.createElement("script");i.text=e,t.innerHTML="",t.appendChild(i)}#o(e){e.getElementsByTagName("form").forEach((e=>{e.addEventListener("submit",(t=>{t.preventDefault(),this.load(e.action,{method:e.method,body:new FormData(e)})}))}))}#n(e){e.getElementsByTagName("a").forEach((e=>{const t=e.href;e.addEventListener("click",(()=>this.load(t))),e.removeAttribute("href")}))}}e.UI=e.UI||{},e.UI.modal=e.UI.modal||{},e.UI.modal.dialog=new class{#e;#r=[];constructor(e){this.#e=e}init(e){if(void 0!==this.#r[e])throw new Error(`Modal with id '${e}' has already been initialized.`);this.#r[e]=new i(this.#e,e)}get(e){return this.#r[e]??null}}(t)}(il,DOMParser);
