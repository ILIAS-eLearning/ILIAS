/**
 * This file is part of ILIAS, a powerful learning management system
 * published by ILIAS open source e-Learning e.V.
 *
 * ILIAS is licensed with the GPL-3.0,
 * see https://www.gnu.org/licenses/gpl-3.0.en.html
 * You should have received a copy of said license along with the
 * source code, too.
 *
 * If this is not the case or you just want to try ILIAS, you'll find
 * us at:
 * https://www.ilias.de
 * https://github.com/ILIAS-eLearning
 */
!function(e,t){"use strict";function o(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var i=o(e),n=o(t);class a{#e;#t;#o;constructor(e,t){if(this.#e=e,this.#t=document.getElementById(t),null===this.#t)throw new Error(`Could not find a Modal for id '${t}'.`);this.#o=this.#t.getElementsByTagName("dialog").item(0)}show(e){this.load(e),this.#o.showModal()}close(){this.#o.close()}async load(e,t={}){await fetch(e,t).then((e=>e.text())).then((e=>{const t=(new this.#e).parseFromString(e,"text/html"),o=t.querySelector('section[data-section="il-modal-response__title"]'),i=t.querySelector('section[data-section="il-modal-response__contents"]'),n=t.querySelector('section[data-section="il-modal-response__buttons"]'),a=t.querySelector('template[data-section="il-modal-response__command"]'),s=t.querySelector("script"),r=this.#o.querySelector("span.il-modal-dialog__title"),l=this.#o.querySelector("div.il-modal-dialog__contents"),d=this.#o.querySelector("div.il-modal-dialog__buttons");return r.innerHTML=o.innerHTML,l.innerHTML=i.innerHTML,d.innerHTML=n.innerHTML,this.#i(l),this.#n(l),s&&this.#a(s.text),a.innerHTML.trim()})).then((e=>{"close"===e&&this.close()}))}#a(e){const t=this.#t.querySelector("section.il-modal-dialog__scripts"),o=document.createElement("script");o.text=e,t.innerHTML="",t.appendChild(o)}#i(e){e.getElementsByTagName("form").forEach((e=>{e.addEventListener("submit",(t=>{t.preventDefault(),this.load(e.action,{method:e.method,body:new FormData(e)})}))}))}#n(e){e.getElementsByTagName("a").forEach((e=>{const t=e.href;e.addEventListener("click",(()=>this.load(t))),e.removeAttribute("href")}))}}i.default.UI=i.default.UI||{},i.default.UI.modal=i.default.UI.modal||{},i.default.UI.modal.dialog=new class{#e;#s=[];constructor(e){this.#e=e}init(e){if(void 0!==this.#s[e])throw new Error(`Modal with id '${e}' has already been initialized.`);this.#s[e]=new a(this.#e,e)}get(e){return this.#s[e]??null}}(n.default)}(il,DOMParser);
