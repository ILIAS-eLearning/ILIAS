function ilCloudFileList(a,b,c,d,e,f,g,h,i){var a=a,b=b,c=c,d=d,j=e,e=e,g=g,f=f,h=h,i=i,k=this,l=!1;this.showDebugMessage=function(a){console.log("cld: "+a)},this.getCurrentId=function(){return g},this.setRootPath=function(a){f=a},this.showBlock=function(a){$("#xcld_block_"+a).show(),$("#xcld_locator_"+a).show()},this.hideBlock=function(a){$("#xcld_block_"+a).hide()},this.removeBlock=function(a){$("#xcld_block_"+a).remove(),$("#xcld_locator_"+a).remove()},this.showItemCreationList=function(){$("#xcld_toolbar").show(),$("#il_add_new_cld_item_v").show()},this.hideItemCreationList=function(){$("#xcld_toolbar").hide(),$("#il_add_new_cld_item_v").hide()},this.toggleTabs=function(){g==e?($("#tab_settings").show(),$("#tab_id_permissions").show(),$("#tab_id_info").show()):($("#tab_settings").hide(),$("#tab_id_permissions").hide(),$("#tab_id_info").hide())},this.hideMessage=function(){k.showDebugMessage("hideMessage"),$("#xcld_message").hide()},this.showMessage=function(a){k.showDebugMessage("showMessage"),$("#xcld_message").html(a),$("#xcld_message").show(),display_message=!0},this.showCurrent=function(b,c,d){b||this.hideMessage(),perm_link=$("#current_perma_link").val(),escaped_current_path=encodeURIComponent(encodeURIComponent(h)),perm_link=perm_link.replace(/path_.*_endPath/,"path_"+escaped_current_path+"_endPath"),$("#current_perma_link").val(perm_link),this.toggleTabs(),0<$("#xcld_block_"+g).length?(this.showDebugMessage("showCurrent: Block already exists, not going Ajax. id="+g),$(".xcld_locator").hide(),this.showBlock(g),this.hideProgressAnimation(),c instanceof Function&&c(this,d)):(this.showProgressAnimation(),$.ajax({type:"POST",url:a.replace(/&amp;/g,"&"),data:{id:g,path:h}}).done(function(a){a.success?(k.showDebugMessage("showCurrent: Block did not exist, successfull ajax request. id="+g+" path= "+h),$("#xcld_blocks").append(a.content),$(".xcld_locator").hide(),$(".ilToolbarSeparator").before(a.locator)):(k.showDebugMessage("showCurrent: Block did not exist, not successfull ajax request. id="+g+" path= "+h),a.message?(k.showDebugMessage("showCurrent: Block did not exist, not successfull ajax request. message="+a.message),k.showMessage(a.message)):(k.showDebugMessage("showCurrent: Block did not exist, not successfull ajax request. data="+a),k.showMessage(a)),k.hideItemCreationList()),c instanceof Function&&c(k,d),k.hideProgressAnimation()}))},this.deleteItem=function(a){this.clicked_delete_item||(this.clicked_delete_item=!0,this.hideMessage(),$.ajax({type:"POST",url:d.replace(/&amp;/g,"&"),data:{id:a}}).done(function(a){k.clicked_delete_item=!1,a.success?(k.showDebugMessage("deleteItem: Form successfully created per ajax. id="+g+" path= "+h),k.hideBlock(g),k.hideItemCreationList(),$("#xcld_blocks").append(a.content),$("input[name='cmd[deleteItem]']").click(function(){k.showProgressAnimation()})):a.message?(k.showDebugMessage("deleteItem: Form not successfully created per ajax. message="+a.message),k.showMessage(a.message)):(k.showDebugMessage("deleteItem: Form not successfully created per ajax. data="+a),k.showMessage(a))}))},this.afterDeleteItem=function(a){if(this.clicked_delete_item=!1,a.success||"cancel"==a.status){var b=function(a,b){$("#cld_delete_item").remove(),a.showItemCreationList(),"cancel"==b.status?a.showDebugMessage("afterDeleteItem: Deletion cancelled."):b.success&&(a.showDebugMessage("afterDeleteItem: Item successfully deleted."),a.showMessage(b.message))};a.success?(k.removeBlock(g),this.showCurrent(!0,b,a)):this.showCurrent(!1,b,a)}else a.message?(k.showDebugMessage("afterDeleteItem: Deletion of item failed. message="+a.message),k.showMessage(a.message)):(k.showDebugMessage("afterDeleteItem: Deletion of Item failed. data="+a),k.showMessage(a)),display_message=!1,k.hideProgressAnimation()},this.createFolder=function(){this.clicked_create_folder||(this.clicked_create_folder=!0,this.hideMessage(),$.ajax({type:"POST",url:b.replace(/&amp;/g,"&"),data:{id:g}}).done(function(a){a.success?(k.clicked_create_folder=!0,k.showDebugMessage("createFolder: Form successfully created per ajax. id="+g+" path= "+h),k.hideBlock(g),k.hideItemCreationList(),$("#xcld_blocks").append(a.content),$("input[name='cmd[createFolder]']").click(function(){k.showProgressAnimation()})):a.message?(k.showDebugMessage("createFolder: Form not successfully created per ajax. message="+a.message),k.showMessage(a.message)):(k.showDebugMessage("createFolder: Form not successfully created per ajax. data="+a),k.showMessage(a))}))},this.afterCreateFolder=function(a){if(k.clicked_create_folder=!1,a.success||"cancel"==a.status){var b=function(a,b){$("#form_cld_create_folder").remove(),a.showItemCreationList(),"cancel"==b.status?a.showDebugMessage("afterCreateFolder: Creation cancelled."):b.success&&(a.showDebugMessage("afterCreateFolder: Folder successfully created."),window.location.hash=$("#xcld_folder_"+b.folder_id).find("a:first").attr("href"),a.showMessage(b.message))};a.success?(k.removeBlock(g),this.showCurrent(!0,b,a)):this.showCurrent(!1,b,a)}else a.message?(k.showDebugMessage("afterCreateFolder: Creation of folder failed. message="+a.message),k.showMessage(a.message)):(k.showDebugMessage("afterCreateFolder: Creation of folder failed. data="+a),k.showMessage(a)),display_message=!1,k.hideProgressAnimation()},this.uploadFile=function(){this.clicked_upload_item||(this.clicked_upload_item=!0,l=!0,this.hideMessage(),this.showProgressAnimation(),$.ajax({type:"POST",url:c.replace(/&amp;/g,"&"),data:{folder_id:g}}).done(function(a){k.hideProgressAnimation(),k.removeBlock(g),k.hideItemCreationList(),$("#xcld_blocks").append(a),$(".ilFileUploadToggleOptions").click(function(){$(".ilFileUploadEntryDescription").remove()}),$(".ilFileUploadContainer").children(".ilFormInfo").html(i)}))},this.afterUpload=function(a){k.clicked_upload_item=!1,k.showDebugMessage("afterUpload: "+a),this.showCurrent(!1,function(a){$("#form_upload").remove(),a.showItemCreationList(),l=!1})},this.showProgressAnimation=function(){$("#loading_div_background").show()},this.hideProgressAnimation=function(){$("#loading_div_background").hide()},$("#xcld_message").insertBefore("#xcld_toolbar"),$("iframe#cld_blank_target").load(function(){var a=this.contentDocument.body;""!=$(a).html()&&(k.showDebugMessage("an unknown occured. message: "+$(a).html()),k.showMessage($(a).html()),k.hideProgressAnimation())}),$.address.change(function(a){"delete_item"==a.pathNames[0]?k.deleteItem(a.parameters.id):!1==l&&(k.hideBlock(g),g=a.parameters.current_id?a.parameters.current_id:g,h=a.parameters.current_path?decodeURIComponent((a.parameters.current_path+"").replace(/\+/g,"%20")):h,j=a.parameters.parent_id?a.parameters.parent_id:e,k.hideBlock(j),k.showCurrent(a.parameters.show_message)),k.showDebugMessage("address.change: Change of address notified. event: "+a.pathNames[0]+" id: "+g)})}