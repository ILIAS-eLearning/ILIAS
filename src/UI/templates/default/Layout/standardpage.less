// variables
@height-header: 60px;
@height-footer: 75px;
@height-breadcrumbs: 33px;

@height-metabar-entry: @height-header;
@width-metabar-entry: @height-header;

@height-header-footer: ((@height-header + @height-footer)*1); // should be obsolete

@mainbar-btn-height: 80px;
@mainbar-btn-width: 80px;
@mainbar-btn-border: 1px solid #ddd;
@mainbar-btn-color: #fff;
@mainbar-btn-color-engaged: #4a4a4a;
@mainbar-label-size: .85rem;

@slate-width: 400px;

@bg-maincontrols: #fff;
@bg-mainbar: #4a4a4a;
@bg-mainbar-engaged: #fff;
@bg-header: #fff;
@bg-breadcrumbs: #fff;
@breadcrumb-divider-color: #bbb;
@bg-metabar-slates: #fafafa;

@logo-height: 45px;
@logo-width: 45px;

@close-slate-btn-height: 45px;


// border
@light-border: #ddd;
// shadows
@shadow-color: #ccc;
@inner-top-shadow: inset 0 5px 9px -5px @shadow-color;
@shadow-right: 1px 3px 4px @shadow-color;
@shadow-bottom: 0 1px 4px @shadow-color;

// glyphicons metabar
@glyph-size: 2.3rem;
@glyph-color: #aaa;


// mixins
.inner-top-shadow {
	box-shadow: @inner-top-shadow;
}

.shadow-right {
	box-shadow: @shadow-right;
}

.shadow-bottom {
	box-shadow: @shadow-bottom;
}

// paddings
@padding-content: 20px; // use BS variable


/* IE10+ not supported
@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
	.il-layout-page {
		&:before {
			content: "Microsoft Internet Explorer is not supported in this ILIAS Version :("
		}
		header,
		footer,
		nav,
		main,
		.layout-page-content {
			display:none;
		}
	}
}
*/


* {
	box-sizing: border-box;
}

menu,
article,
aside,
details,
footer,
header,
nav,
section {
    display: block;
}

/*
*********************
grid-based layout
*********************
*/
// main grid without slates
.il-layout-page {
	background: @body-bg; /* MOVE */
	display: -ms-grid;
	display: grid;
	grid-gap: 0px;
	-ms-grid-columns: @mainbar-btn-width 1fr;
    grid-template-columns: @mainbar-btn-width 1fr;
	-ms-grid-rows: @height-header @height-breadcrumbs 1fr;
    grid-template-rows: @height-header @height-breadcrumbs 1fr;
    /* // not supported in IE, use track-line instead
	grid-template-areas:
    "header header"
	"breadcrumbs breadcrumbs"
    "mainbar content"
    "footer footer";
	*/
    height: 100%;
	overflow: hidden;
	width: 100%;
	.il-maincontrols-mainbar {
		.il-mainbar-close-slates {
			display: none;
		}
	}
	&.with-engaged-slates {
		-ms-grid-columns: @slate-width + @mainbar-btn-width 1fr;
		grid-template-columns: @slate-width + @mainbar-btn-width 1fr;
		.il-maincontrols-mainbar {
			width: @slate-width + @mainbar-btn-width;
			/* transition: all .3s; */
			// slate
			.il-mainbar-slates {
				display: -ms-flexbox;
				display: flex;
				-ms-flex-direction: column;
				flex-direction: column;
				// height: calc(~"100vh - " @height-header-footer);
				.il-maincontrols-slate {
					overflow-y: auto;
				}
			}
			// show slate remove btn
			.il-mainbar-close-slates {
				display: -ms-flexbox;
				display: flex;
			}
		}
	}
}

/* Metabar */
header {
	-ms-grid-column: 1;
	-ms-grid-column-span: 2;
	-ms-grid-row: 1;
	grid-column-start: 1;
	grid-column-end: 3;
	grid-row: 1;
	z-index: 998;
}

// head-container with logo and metabar
.header-inner {
	-ms-flex-align: center;
    align-items: center;
    background: @bg-header; /* style move */
	display: -ms-flexbox;
    display: flex;
	-ms-flex-direction: row;
    flex-direction: row;
    height: @height-header;
    padding: 0 15px;
    position: fixed;
    width: 100%;
	-ms-flex-pack: justify;
    justify-content: space-between;
	// .shadow-bottom();
}

// logo-container
.il-logo {
    width: 40px;
}

/* breadcrumbs */
.breadcrumbs {
	-ms-flex-align: center;
	align-items: center;
	background-color: @bg-breadcrumbs; /* move style */
	border-top: 1px solid @light-border; /* move style */
	display: -ms-flexbox;
	display: flex;
	-ms-flex-direction: row;
	flex-direction: row;
	-ms-grid-column: 1;
	-ms-grid-column-span: 2;
	-ms-grid-row: 2;
	grid-column-start: 1;
	grid-column-end: 3;
	grid-row: 2;
	z-index: 997;
	.shadow-bottom(); /* move style */
	ul.breadcrumb {
		padding-left: @mainbar-btn-width + @padding-content; // move style
		&>li+li:before {
			content: " \e606"; /* move style */
			color: @breadcrumb-divider-color;
			font-family: il-icons; /* move style */
		}
	}
}

/* mainbar */
nav.il-maincontrols {
	-ms-grid-column: 1;
	-ms-grid-row: 3;
	grid-column: 1;
	grid-row: 3;
	z-index: 996;
}

// Subgrid mainbar
.il-maincontrols-mainbar {
	background-color: @bg-maincontrols;
	display: -ms-grid;
	display: grid;
	height: 100%;
	-ms-grid-colums: @mainbar-btn-width @slate-width;
	grid-template-columns: @mainbar-btn-width @slate-width;
	width: @mainbar-btn-width;
	&.engaged {

	}
}

// mainbar
.il-mainbar {
	background-color: @bg-mainbar;
	.shadow-right();
}

// tools section
.il-mainbar-tools-button {
	display: -ms-flexbox;
    display: flex;
	-ms-flex-direction: row;
    flex-direction: row;
}

.il-mainbar-tools-button button {
	height:@mainbar-btn-height;
	width: @mainbar-btn-width;
}

.il-mainbar-tools-entries {
	button {
		height:@mainbar-btn-height;
		width: @mainbar-btn-width;
	}
	&.engaged {
		display: -ms-flexbox;
		display: flex;
		-ms-flex-direction: row;
		flex-direction: row;
	}
}

// mainbar triggers
.il-mainbar-triggers {
}

// mainbar slates
.il-mainbar-slates {
}

// mainbar close slates
.il-mainbar-close-slates {
}

// remove tools
.il-mainbar-remove-tool {
	display: none;
	.il-mainbar-tools-entries.engaged & {
		display: block;
	}
}

.il-logo {
	justify-self: start;
	img {
		height: @logo-height;
		width: @logo-width;
	}
}



/*
main-tag is important for screenreader
fix due to main-tag is not supported in IE
*/

/* Content */
main {
	display: block;
}

.il-layout-page-content {
	display: -ms-grid;
	display: grid;
	-ms-grid-column: 2;
	-ms-grid-row: 3;
	grid-column: 2;
	grid-row: 3;
	overflow: auto;
	padding: 20px;
}

/* Footer */
footer {
	background-color: @brand-primary;
	grid-area: footer;
	z-index: 2;
}
