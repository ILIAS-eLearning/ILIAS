parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"J7kk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=i(require("@babel/runtime/helpers/inherits")),r=i(require("@babel/runtime/helpers/possibleConstructorReturn")),n=i(require("@babel/runtime/helpers/getPrototypeOf")),a=i(require("@babel/runtime/helpers/classCallCheck")),t=i(require("@babel/runtime/helpers/createClass")),s=i(require("@babel/runtime/helpers/typeof")),o=i(require("./basedecoder"));function i(e){return e&&e.__esModule?e:{default:e}}function f(e){var a=u();return function(){var t,s=(0,n.default)(e);if(a){var o=(0,n.default)(this).constructor;t=Reflect.construct(s,arguments,o)}else t=s.apply(this,arguments);return(0,r.default)(this,t)}}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}var c=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),l=4017,h=799,v=3406,d=2276,m=1567,b=3784,p=5793,k=2896;function w(e,r){for(var n=0,a=[],t=16;t>0&&!e[t-1];)--t;a.push({children:[],index:0});for(var s,o=a[0],i=0;i<t;i++){for(var f=0;f<e[i];f++){for((o=a.pop()).children[o.index]=r[n];o.index>0;)o=a.pop();for(o.index++,a.push(o);a.length<=i;)a.push(s={children:[],index:0}),o.children[o.index]=s.children,o=s;n++}i+1<t&&(a.push(s={children:[],index:0}),o.children[o.index]=s.children,o=s)}return a[0].children}function y(e,r,n,a,t,o,i,f,u){var l=n.mcusPerLine,h=n.progressive,v=r,d=r,m=0,b=0;function p(){if(b>0)return m>>--b&1;if(255===(m=e[d++])){var r=e[d++];if(r)throw new Error("unexpected marker: ".concat((m<<8|r).toString(16)))}return b=7,m>>>7}function k(e){for(var r,n=e;null!==(r=p());){if("number"==typeof(n=n[r]))return n;if("object"!==(0,s.default)(n))throw new Error("invalid huffman sequence")}return null}function w(e){for(var r=e,n=0;r>0;){var a=p();if(null===a)return;n=n<<1|a,--r}return n}function y(e){var r=w(e);return r>=1<<e-1?r:r+(-1<<e)+1}var C=0;var P,x=0;function g(e,r,n,a,t){var s=n%l,o=(n/l|0)*e.v+a,i=s*e.h+t;r(e,e.blocks[o][i])}function T(e,r,n){var a=n/e.blocksPerLine|0,t=n%e.blocksPerLine;r(e,e.blocks[a][t])}var A,q,L,E,D,I,O=a.length;I=h?0===o?0===f?function(e,r){var n=k(e.huffmanTableDC),a=0===n?0:y(n)<<u;e.pred+=a,r[0]=e.pred}:function(e,r){r[0]|=p()<<u}:0===f?function(e,r){if(C>0)C--;else for(var n=o,a=i;n<=a;){var t=k(e.huffmanTableAC),s=15&t,f=t>>4;if(0===s){if(f<15){C=w(f)+(1<<f)-1;break}n+=16}else r[c[n+=f]]=y(s)*(1<<u),n++}}:function(e,r){for(var n=o,a=i,t=0;n<=a;){var s=c[n],f=r[s]<0?-1:1;switch(x){case 0:var l=k(e.huffmanTableAC),h=15&l;if(t=l>>4,0===h)t<15?(C=w(t)+(1<<t),x=4):(t=16,x=1);else{if(1!==h)throw new Error("invalid ACn encoding");P=y(h),x=t?2:3}continue;case 1:case 2:r[s]?r[s]+=(p()<<u)*f:0==--t&&(x=2===x?3:0);break;case 3:r[s]?r[s]+=(p()<<u)*f:(r[s]=P<<u,x=0);break;case 4:r[s]&&(r[s]+=(p()<<u)*f)}n++}4===x&&0==--C&&(x=0)}:function(e,r){var n=k(e.huffmanTableDC),a=0===n?0:y(n);e.pred+=a,r[0]=e.pred;for(var t=1;t<64;){var s=k(e.huffmanTableAC),o=15&s,i=s>>4;if(0===o){if(i<15)break;t+=16}else r[c[t+=i]]=y(o),t++}};var z,M,R=0;M=1===O?a[0].blocksPerLine*a[0].blocksPerColumn:l*n.mcusPerColumn;for(var U=t||M;R<M;){for(q=0;q<O;q++)a[q].pred=0;if(C=0,1===O)for(A=a[0],D=0;D<U;D++)T(A,I,R),R++;else for(D=0;D<U;D++){for(q=0;q<O;q++){var j=A=a[q],_=j.h,B=j.v;for(L=0;L<B;L++)for(E=0;E<_;E++)g(A,I,R,L,E)}if(++R===M)break}if(b=0,(z=e[d]<<8|e[d+1])<65280)throw new Error("marker was not found");if(!(z>=65488&&z<=65495))break;d+=2}return d-v}function C(e,r){var n=[],a=r.blocksPerLine,t=r.blocksPerColumn,s=a<<3,o=new Int32Array(64),i=new Uint8Array(64);function f(e,n,a){var t,s,o,i,f,u,c,w,y,C,P=r.quantizationTable,x=a;for(C=0;C<64;C++)x[C]=e[C]*P[C];for(C=0;C<8;++C){var g=8*C;0!==x[1+g]||0!==x[2+g]||0!==x[3+g]||0!==x[4+g]||0!==x[5+g]||0!==x[6+g]||0!==x[7+g]?(t=p*x[0+g]+128>>8,s=p*x[4+g]+128>>8,o=x[2+g],i=x[6+g],f=k*(x[1+g]-x[7+g])+128>>8,w=k*(x[1+g]+x[7+g])+128>>8,u=x[3+g]<<4,c=x[5+g]<<4,y=t-s+1>>1,t=t+s+1>>1,s=y,y=o*b+i*m+128>>8,o=o*m-i*b+128>>8,i=y,y=f-c+1>>1,f=f+c+1>>1,c=y,y=w+u+1>>1,u=w-u+1>>1,w=y,y=t-i+1>>1,t=t+i+1>>1,i=y,y=s-o+1>>1,s=s+o+1>>1,o=y,y=f*d+w*v+2048>>12,f=f*v-w*d+2048>>12,w=y,y=u*h+c*l+2048>>12,u=u*l-c*h+2048>>12,c=y,x[0+g]=t+w,x[7+g]=t-w,x[1+g]=s+c,x[6+g]=s-c,x[2+g]=o+u,x[5+g]=o-u,x[3+g]=i+f,x[4+g]=i-f):(y=p*x[0+g]+512>>10,x[0+g]=y,x[1+g]=y,x[2+g]=y,x[3+g]=y,x[4+g]=y,x[5+g]=y,x[6+g]=y,x[7+g]=y)}for(C=0;C<8;++C){var T=C;0!==x[8+T]||0!==x[16+T]||0!==x[24+T]||0!==x[32+T]||0!==x[40+T]||0!==x[48+T]||0!==x[56+T]?(t=p*x[0+T]+2048>>12,s=p*x[32+T]+2048>>12,o=x[16+T],i=x[48+T],f=k*(x[8+T]-x[56+T])+2048>>12,w=k*(x[8+T]+x[56+T])+2048>>12,u=x[24+T],c=x[40+T],y=t-s+1>>1,t=t+s+1>>1,s=y,y=o*b+i*m+2048>>12,o=o*m-i*b+2048>>12,i=y,y=f-c+1>>1,f=f+c+1>>1,c=y,y=w+u+1>>1,u=w-u+1>>1,w=y,y=t-i+1>>1,t=t+i+1>>1,i=y,y=s-o+1>>1,s=s+o+1>>1,o=y,y=f*d+w*v+2048>>12,f=f*v-w*d+2048>>12,w=y,y=u*h+c*l+2048>>12,u=u*l-c*h+2048>>12,c=y,x[0+T]=t+w,x[56+T]=t-w,x[8+T]=s+c,x[48+T]=s-c,x[16+T]=o+u,x[40+T]=o-u,x[24+T]=i+f,x[32+T]=i-f):(y=p*a[C+0]+8192>>14,x[0+T]=y,x[8+T]=y,x[16+T]=y,x[24+T]=y,x[32+T]=y,x[40+T]=y,x[48+T]=y,x[56+T]=y)}for(C=0;C<64;++C){var A=128+(x[C]+8>>4);n[C]=A<0?0:A>255?255:A}}for(var u=0;u<t;u++){for(var c=u<<3,w=0;w<8;w++)n.push(new Uint8Array(s));for(var y=0;y<a;y++){f(r.blocks[u][y],i,o);for(var C=0,P=y<<3,x=0;x<8;x++)for(var g=n[c+x],T=0;T<8;T++)g[P+T]=i[C++]}}return n}var P=function(){function e(){(0,a.default)(this,e),this.jfif=null,this.adobe=null,this.quantizationTables=[],this.huffmanTablesAC=[],this.huffmanTablesDC=[],this.resetFrames()}return(0,t.default)(e,[{key:"resetFrames",value:function(){this.frames=[]}},{key:"parse",value:function(e){var r=0;function n(){var n=e[r]<<8|e[r+1];return r+=2,n}function a(e){var r,n,a=0,t=0;for(n in e.components)e.components.hasOwnProperty(n)&&(a<(r=e.components[n]).h&&(a=r.h),t<r.v&&(t=r.v));var s=Math.ceil(e.samplesPerLine/8/a),o=Math.ceil(e.scanLines/8/t);for(n in e.components)if(e.components.hasOwnProperty(n)){r=e.components[n];for(var i=Math.ceil(Math.ceil(e.samplesPerLine/8)*r.h/a),f=Math.ceil(Math.ceil(e.scanLines/8)*r.v/t),u=s*r.h,c=o*r.v,l=[],h=0;h<c;h++){for(var v=[],d=0;d<u;d++)v.push(new Int32Array(64));l.push(v)}r.blocksPerLine=i,r.blocksPerColumn=f,r.blocks=l}e.maxH=a,e.maxV=t,e.mcusPerLine=s,e.mcusPerColumn=o}var t,s,o=n();if(65496!==o)throw new Error("SOI not found");for(o=n();65497!==o;){switch(o){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var i=(t=void 0,s=void 0,t=n(),s=e.subarray(r,r+t-2),r+=s.length,s);65504===o&&74===i[0]&&70===i[1]&&73===i[2]&&70===i[3]&&0===i[4]&&(this.jfif={version:{major:i[5],minor:i[6]},densityUnits:i[7],xDensity:i[8]<<8|i[9],yDensity:i[10]<<8|i[11],thumbWidth:i[12],thumbHeight:i[13],thumbData:i.subarray(14,14+3*i[12]*i[13])}),65518===o&&65===i[0]&&100===i[1]&&111===i[2]&&98===i[3]&&101===i[4]&&0===i[5]&&(this.adobe={version:i[6],flags0:i[7]<<8|i[8],flags1:i[9]<<8|i[10],transformCode:i[11]});break;case 65499:for(var f=n()+r-2;r<f;){var u=e[r++],l=new Int32Array(64);if(u>>4==0)for(var h=0;h<64;h++){l[c[h]]=e[r++]}else{if(u>>4!=1)throw new Error("DQT: invalid table spec");for(var v=0;v<64;v++){l[c[v]]=n()}}this.quantizationTables[15&u]=l}break;case 65472:case 65473:case 65474:n();for(var d={extended:65473===o,progressive:65474===o,precision:e[r++],scanLines:n(),samplesPerLine:n(),components:{},componentsOrder:[]},m=e[r++],b=void 0,p=0;p<m;p++){b=e[r];var k=e[r+1]>>4,C=15&e[r+1],P=e[r+2];d.componentsOrder.push(b),d.components[b]={h:k,v:C,quantizationIdx:P},r+=3}a(d),this.frames.push(d);break;case 65476:for(var x=n(),g=2;g<x;){for(var T=e[r++],A=new Uint8Array(16),q=0,L=0;L<16;L++,r++)A[L]=e[r],q+=A[L];for(var E=new Uint8Array(q),D=0;D<q;D++,r++)E[D]=e[r];g+=17+q,T>>4==0?this.huffmanTablesDC[15&T]=w(A,E):this.huffmanTablesAC[15&T]=w(A,E)}break;case 65501:n(),this.resetInterval=n();break;case 65498:n();for(var I=e[r++],O=[],z=this.frames[0],M=0;M<I;M++){var R=z.components[e[r++]],U=e[r++];R.huffmanTableDC=this.huffmanTablesDC[U>>4],R.huffmanTableAC=this.huffmanTablesAC[15&U],O.push(R)}var j=e[r++],_=e[r++],B=e[r++],F=y(e,r,z,O,this.resetInterval,j,_,B>>4,15&B);r+=F;break;case 65535:255!==e[r]&&r--;break;default:if(255===e[r-3]&&e[r-2]>=192&&e[r-2]<=254){r-=3;break}throw new Error("unknown JPEG marker ".concat(o.toString(16)))}o=n()}}},{key:"getResult",value:function(){var e=this.frames;if(0===this.frames.length)throw new Error("no frames were decoded");this.frames.length>1&&console.warn("more than one frame is not supported");for(var r=0;r<this.frames.length;r++)for(var n=this.frames[r].components,a=0,t=Object.keys(n);a<t.length;a++){var s=t[a];n[s].quantizationTable=this.quantizationTables[n[s].quantizationIdx],delete n[s].quantizationIdx}for(var o=e[0],i=o.components,f=o.componentsOrder,u=[],c=o.samplesPerLine,l=o.scanLines,h=0;h<f.length;h++){var v=i[f[h]];u.push({lines:C(o,v),scaleX:v.h/o.maxH,scaleY:v.v/o.maxV})}for(var d=new Uint8Array(c*l*u.length),m=0,b=0;b<l;++b)for(var p=0;p<c;++p)for(var k=0;k<u.length;++k){var w=u[k];d[m]=w.lines[0|b*w.scaleY][0|p*w.scaleX],++m}return d}}]),e}(),x=function(r){(0,e.default)(s,r);var n=f(s);function s(e){var r;return(0,a.default)(this,s),(r=n.call(this)).reader=new P,e.JPEGTables&&r.reader.parse(e.JPEGTables),r}return(0,t.default)(s,[{key:"decodeBlock",value:function(e){return this.reader.resetFrames(),this.reader.parse(new Uint8Array(e)),this.reader.getResult().buffer}}]),s}(o.default);exports.default=x;
},{"@babel/runtime/helpers/inherits":"d4H2","@babel/runtime/helpers/possibleConstructorReturn":"pxk2","@babel/runtime/helpers/getPrototypeOf":"UJE0","@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/typeof":"b9XL","./basedecoder":"FJDe"}]},{},[], "GeoTIFF")
//# sourceMappingURL=jpeg.efbb5038.js.map